(function(e){function t(t){for(var r,c,u=t[0],s=t[1],i=t[2],l=0,d=[];l<u.length;l++)c=u[l],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&d.push(o[c][0]),o[c]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);f&&f(t);while(d.length)d.shift()();return a.push.apply(a,i||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,c=1;c<n.length;c++){var u=n[c];0!==o[u]&&(r=!1)}r&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},c={app:0},o={app:0},a=[];function u(e){return s.p+"js/"+({"user-auth":"user-auth"}[e]||e)+"."+{"chunk-0e63ae30":"fcb6f577","chunk-20ea4b3a":"43c357e7","chunk-7a8ec606":"337d1422","chunk-8af90b36":"9617425c","chunk-a80ab35c":"b2d22b3e","user-auth":"f1d28053"}[e]+".js"}function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-0e63ae30":1,"chunk-20ea4b3a":1,"chunk-7a8ec606":1,"chunk-8af90b36":1,"chunk-a80ab35c":1,"user-auth":1};c[e]?t.push(c[e]):0!==c[e]&&n[e]&&t.push(c[e]=new Promise((function(t,n){for(var r="css/"+({"user-auth":"user-auth"}[e]||e)+"."+{"chunk-0e63ae30":"1aed6bc7","chunk-20ea4b3a":"81202b02","chunk-7a8ec606":"29b90446","chunk-8af90b36":"1d124163","chunk-a80ab35c":"17199cf2","user-auth":"c30a9b2d"}[e]+".css",o=s.p+r,a=document.getElementsByTagName("link"),u=0;u<a.length;u++){var i=a[u],l=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(l===r||l===o))return t()}var d=document.getElementsByTagName("style");for(u=0;u<d.length;u++){i=d[u],l=i.getAttribute("data-href");if(l===r||l===o)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var r=t&&t.target&&t.target.src||o,a=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=r,delete c[e],f.parentNode.removeChild(f),n(a)},f.href=o;var h=document.getElementsByTagName("head")[0];h.appendChild(f)})).then((function(){c[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var a=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=a);var i,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=u(e);var d=new Error;i=function(t){l.onerror=l.onload=null,clearTimeout(f);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),c=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+c+")",d.name="ChunkLoadError",d.type=r,d.request=c,n[1](d)}o[e]=void 0}};var f=setTimeout((function(){i({type:"timeout",target:l})}),12e4);l.onerror=l.onload=i,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var d=0;d<i.length;d++)t(i[d]);var f=l;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"04e3":function(e,t,n){"use strict";n("2236")},2236:function(e,t,n){},3701:function(e,t,n){"use strict";n("44a1")},"3b81":function(e,t,n){"use strict";n("f7bd")},"44a1":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23");function c(e,t,n,c,o,a){var u=Object(r["D"])("the-header"),s=Object(r["D"])("router-view");return Object(r["v"])(),Object(r["g"])(r["a"],null,[Object(r["j"])(u),Object(r["h"])("main",null,[Object(r["j"])(s,null,{default:Object(r["M"])((function(e){return[Object(r["j"])(r["b"],{name:"route",mode:"out-in"},{default:Object(r["M"])((function(){return[(Object(r["v"])(),Object(r["e"])(Object(r["E"])(e.Component)))]})),_:2},1024)]})),_:1})])],64)}var o=n("5530"),a=(n("ac1f"),n("5319"),function(e){return Object(r["y"])("data-v-002aad0a"),e=e(),Object(r["w"])(),e}),u=a((function(){return Object(r["h"])("span",{class:"logo"},"codecoach",-1)})),s=Object(r["i"])("Coaches"),i={key:0,ref:""},l=Object(r["i"])("Messages"),d={key:1,ref:""},f={key:2},h=Object(r["i"])("Sign In/Up");function b(e,t,n,c,o,a){var b=Object(r["D"])("router-link");return Object(r["v"])(),Object(r["g"])("header",null,[Object(r["h"])("nav",null,[Object(r["j"])(b,{to:"/"},{default:Object(r["M"])((function(){return[u]})),_:1}),Object(r["h"])("ul",null,[Object(r["h"])("li",null,[Object(r["j"])(b,{to:"/coaches"},{default:Object(r["M"])((function(){return[s]})),_:1})]),e.isLoggedIn?(Object(r["v"])(),Object(r["g"])("li",i,[Object(r["j"])(b,{to:"/messages"},{default:Object(r["M"])((function(){return[l]})),_:1})],512)):Object(r["f"])("",!0),e.isLoggedIn?(Object(r["v"])(),Object(r["g"])("li",d,[Object(r["h"])("a",{onClick:t[0]||(t[0]=function(){return a.logOut&&a.logOut.apply(a,arguments)})},"Sign-Out")],512)):(Object(r["v"])(),Object(r["g"])("li",f,[Object(r["j"])(b,{to:"/auth"},{default:Object(r["M"])((function(){return[h]})),_:1})]))])])])}var g=n("5502"),p={computed:Object(o["a"])({},Object(g["c"])(["isLoggedIn"])),methods:Object(o["a"])(Object(o["a"])({},Object(g["b"])(["signOut"])),{},{logOut:function(){this.signOut(),this.$router.replace("/coaches")}})},m=(n("7362"),n("6b0d")),O=n.n(m);const j=O()(p,[["render",b],["__scopeId","data-v-002aad0a"]]);var v=j,k={components:{TheHeader:v},computed:Object(o["a"])({},Object(g["c"])(["didAutoSignOut"])),methods:Object(o["a"])({},Object(g["b"])(["loadCoaches","autoLogin"])),created:function(){this.loadCoaches(),this.autoLogin()},watch:{didAutoSignOut:function(e,t){t||t===e||this.$router.replace("/coaches")}}};n("3b81");const w=O()(k,[["render",c]]);var y=w;n("9911");function I(e,t,n,c,o,a){var u=Object(r["D"])("router-link");return n.link?(Object(r["v"])(),Object(r["e"])(u,{key:1,to:n.to,class:Object(r["q"])(n.mode)},{default:Object(r["M"])((function(){return[Object(r["C"])(e.$slots,"default",{},void 0,!0)]})),_:3},8,["to","class"])):(Object(r["v"])(),Object(r["g"])("button",{key:0,class:Object(r["q"])(n.mode)},[Object(r["C"])(e.$slots,"default",{},void 0,!0)],2))}var S={props:["link","to","mode"]};n("9be0");const _=O()(S,[["render",I],["__scopeId","data-v-265b9e72"]]);var C=_,x={class:"card"};function E(e,t){return Object(r["v"])(),Object(r["g"])("div",x,[Object(r["C"])(e.$slots,"default",{},void 0,!0)])}n("b4c1");const T={},A=O()(T,[["render",E],["__scopeId","data-v-1ac284a9"]]);var M=A,L={class:"badge"};function N(e,t){return Object(r["v"])(),Object(r["g"])("span",L,[Object(r["C"])(e.$slots,"default",{},void 0,!0)])}n("04e3");const F={},P=O()(F,[["render",N],["__scopeId","data-v-147bc526"]]);var D=P,R=function(e){return Object(r["y"])("data-v-e5267c16"),e=e(),Object(r["w"])(),e},B={class:"lds-spinner"},U=R((function(){return Object(r["h"])("div",null,null,-1)})),J=R((function(){return Object(r["h"])("div",null,null,-1)})),$=R((function(){return Object(r["h"])("div",null,null,-1)})),q=R((function(){return Object(r["h"])("div",null,null,-1)})),G=R((function(){return Object(r["h"])("div",null,null,-1)})),z=R((function(){return Object(r["h"])("div",null,null,-1)})),W=R((function(){return Object(r["h"])("div",null,null,-1)})),H=R((function(){return Object(r["h"])("div",null,null,-1)})),K=R((function(){return Object(r["h"])("div",null,null,-1)})),Y=R((function(){return Object(r["h"])("div",null,null,-1)})),V=R((function(){return Object(r["h"])("div",null,null,-1)})),X=R((function(){return Object(r["h"])("div",null,null,-1)})),Q=[U,J,$,q,G,z,W,H,K,Y,V,X];function Z(e,t){return Object(r["v"])(),Object(r["g"])("div",B,Q)}n("ffc9");const ee={},te=O()(ee,[["render",Z],["__scopeId","data-v-e5267c16"]]);var ne=te,re=(n("d3b7"),n("3ca3"),n("ddb0"),n("6c02")),ce=(n("fb6a"),Object(r["i"])("coaches"));function oe(e,t,n,c,o,a){var u=Object(r["D"])("router-link"),s=Object(r["D"])("BaseCard");return Object(r["v"])(),Object(r["g"])("section",null,[Object(r["j"])(s,{style:{margin:"0 auto","flex-direction":"column"}},{default:Object(r["M"])((function(){return[Object(r["h"])("h1",null,Object(r["G"])(n.resource?n.resource[0].toUpperCase()+n.resource.slice(1):"Page")+" Not Found! ",1),Object(r["h"])("p",null,[Object(r["i"])(" Could not find this "+Object(r["G"])(n.resource?n.resource:"page")+" - check out our list of ",1),Object(r["j"])(u,{to:"/coaches"},{default:Object(r["M"])((function(){return[ce]})),_:1})])]})),_:1})])}var ae={props:{resource:{type:String,default:""}}};n("3701");const ue=O()(ae,[["render",oe],["__scopeId","data-v-2a91b333"]]);var se,ie=ue,le={registerCoach:function(e,t){e.coaches.push(t)},setCoaches:function(e,t){e.coaches=t},setFetchTimestamp:function(e){e.lastFetch=(new Date).getTime()}},de={getCoaches:function(e){return e.coaches},hasCoaches:function(e){return e.coaches&&e.coaches.length>0},isCoach:function(e,t,n,r){return t.getCoaches.some((function(e){return e.id===r.userId}))},shouldFetchNew:function(e){var t=e.lastFetch;if(!t)return!0;var n=(new Date).getTime();return(n-t)/1e3>60}},fe=n("1da1"),he=(n("96cf"),n("99af"),{fetchCoaches:function(e,t){return Object(fe["a"])(regeneratorRuntime.mark((function n(){var r,c,a,u,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t||t.refresh||e.getters.shouldFetchNew){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,fetch("https://coachu-71b4b-default-rtdb.firebaseio.com/coaches.json");case 4:return r=n.sent,n.next=7,r.json();case 7:if(c=n.sent,r.ok){n.next=11;break}throw a=new Error("Failed to fetch data!"),a;case 11:for(s in u=[],c)u.push(Object(o["a"])(Object(o["a"])({},c[s]),{},{id:s}));e.commit("setCoaches",u),e.commit("setFetchTimestamp"),e.dispatch("loadingFinish",null,{root:!0});case 16:case"end":return n.stop()}}),n)})))()},registerCoach:function(e,t){return Object(fe["a"])(regeneratorRuntime.mark((function n(){var r,c,a,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.rootGetters,c=r.userId,a=r.token,n.next=3,fetch("https://coachu-71b4b-default-rtdb.firebaseio.com/coaches/".concat(c,".json?auth=").concat(a),{method:"PUT",body:JSON.stringify(Object(o["a"])(Object(o["a"])({},t.coach),{},{createdAt:Date.now(),updatedAt:Date.now()}))});case 3:if(u=n.sent,u.ok){n.next=6;break}throw new Error("Failed to save to database!");case 6:e.commit("registerCoach",Object(o["a"])(Object(o["a"])({},t.coach),{},{id:c}));case 7:case"end":return n.stop()}}),n)})))()}}),be={namespaced:!0,state:function(){return{coaches:[],lastFetch:null}},mutations:le,getters:de,actions:he},ge={addMessage:function(e,t){e.messages.push(t)},setMessages:function(e,t){e.messages=t}},pe={getMessages:function(e){return e.messages},hasMessages:function(e){return e.messages.length>0}},me=(n("b0c0"),{sendMessage:function(e,t){return Object(fe["a"])(regeneratorRuntime.mark((function n(){var r,c,a,u,s,i,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.email,c=t.message,a=t.coachId,u={email:r,message:c},n.next=4,fetch("https://coachu-71b4b-default-rtdb.firebaseio.com/messages/".concat(a,".json"),{method:"POST",body:JSON.stringify(u)});case 4:if(s=n.sent,s.ok){n.next=8;break}throw i=new Error("Network error - Failed to send message."),i;case 8:l=s.json(),e.commit("addMessage",Object(o["a"])(Object(o["a"])({},u),{},{coachId:a,id:l.name}));case 10:case"end":return n.stop()}}),n)})))()},fetchMessages:function(e){return Object(fe["a"])(regeneratorRuntime.mark((function t(){var n,r,c,a,u,s,i,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.rootGetters,r=n.userId,c=n.token,t.next=3,fetch("https://coachu-71b4b-default-rtdb.firebaseio.com/messages/".concat(r,".json?auth=").concat(c));case 3:return a=t.sent,t.next=6,a.json();case 6:if(u=t.sent,a.ok){t.next=10;break}throw s=new Error(a.message||"Network error - Failed to retrieve messages."),s;case 10:for(l in i=[],u)i.push(Object(o["a"])(Object(o["a"])({},u[l]),{},{id:l}));e.commit("setMessages",i);case 13:case"end":return t.stop()}}),t)})))()}}),Oe={namespaced:!0,state:function(){return{messages:[]}},mutations:ge,getters:pe,actions:me},je={setCurrentUser:function(e,t){var n=t.token,r=t.userId;e.didAutoSignOut=!1,e.token=n,e.userId=r},setAutoSignOut:function(e){e.didAutoSignOut=!0}},ve={userId:function(e){return e.userId},token:function(e){return e.token},isLoggedIn:function(e){return!!e.token},didAutoSignOut:function(e){return e.didAutoSignOut}},ke=(n("a9e3"),{authenticate:function(e,t){return Object(fe["a"])(regeneratorRuntime.mark((function n(){var r,c,o,a,u,s,i,l,d,f,h;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.user,c=r.email,o=r.password,a=t.id,u="signin"===a?"signInWithPassword":"signUp",n.next=4,fetch("https://identitytoolkit.googleapis.com/v1/accounts:".concat(u,"?key=AIzaSyBe-zJavtAE1fxWUjnzMb6umRkrbKjtCuA"),{method:"POST",body:JSON.stringify({email:c,password:o,returnSecureToken:!0})});case 4:return s=n.sent,n.next=7,s.json();case 7:if(i=n.sent,s.ok){n.next=25;break}if(l="",!i.error||!i.error.message){n.next=23;break}n.t0=i.error.message,n.next="EMAIL_NOT_FOUND"===n.t0?14:"INVALID_PASSWORD"===n.t0?16:"EMAIL_EXISTS"===n.t0?18:"TOO_MANY_ATTEMPTS_TRY_LATER"===n.t0?20:22;break;case 14:return l="Email address not found - please sign up to create an account.",n.abrupt("break",23);case 16:return l="Invalid username or password.",n.abrupt("break",23);case 18:return l="This email has already been registered.",n.abrupt("break",23);case 20:return l="Too many attempts - service temporarily disabled - please try again later.",n.abrupt("break",23);case 22:return n.abrupt("break",23);case 23:throw d=new Error(l||"Network error - failed to sign user in."),d;case 25:f=1e3*i.expiresIn,localStorage.setItem("userId",i.localId),localStorage.setItem("token",i.idToken),localStorage.setItem("tokenExpiry",f),se=setTimeout((function(){e.dispatch("autoSignOut"),console.log(" expired")}),f),h={token:i.idToken,userId:i.localId},e.commit("setCurrentUser",h);case 32:case"end":return n.stop()}}),n)})))()},autoLogin:function(e){var t=localStorage.getItem("userId"),n=localStorage.getItem("token"),r=localStorage.getItem("tokenExpiry"),c=Number(r)-3600;c<0||n&&t&&(se=setTimeout((function(){return e.dispatch("autoSignOut")}),c),e.commit("setCurrentUser",{userId:t,token:n}))},signOut:function(e){clearTimeout(se),localStorage.removeItem("userId"),localStorage.removeItem("token"),localStorage.removeItem("tokenExpiry"),e.commit("setCurrentUser",{token:null,userId:null})},autoSignOut:function(e){e.dispatch("signOut"),e.commit("setAutoSignOut")}}),we={state:function(){return{token:null,userId:null,didAutoSignOut:!1}},mutations:je,getters:ve,actions:ke},ye=Object(g["a"])({modules:{coaches:be,messages:Oe,auth:we},state:function(){return{isLoading:!0,error:null}},getters:{isLoading:function(e){return e.isLoading},isError:function(e){return e.error}},mutations:{setLoading:function(e,t){e.isLoading=t},setError:function(e,t){e.error=t}},actions:{loadingStart:function(e){e.commit("setLoading",!0)},loadingFinish:function(e){e.commit("setLoading",!1)},loadingError:function(e,t){e.commit("setError",t)},loadCoaches:function(e,t){e.dispatch("loadingStart"),e.dispatch("loadingError",null),this.dispatch("coaches/fetchCoaches",t).catch((function(){e.dispatch("loadingFinish"),e.dispatch("loadingError","Network Error - please try again later.")}))}}}),Ie=ye,Se=function(){return n.e("chunk-a80ab35c").then(n.bind(null,"203c"))},_e=function(){return n.e("chunk-20ea4b3a").then(n.bind(null,"f922"))},Ce=function(){return n.e("chunk-7a8ec606").then(n.bind(null,"2ad0"))},xe=function(){return n.e("chunk-0e63ae30").then(n.bind(null,"997c"))},Ee=function(){return n.e("chunk-8af90b36").then(n.bind(null,"ab16"))},Te=function(){return n.e("user-auth").then(n.bind(null,"212c"))},Ae=Object(re["a"])({routes:[{path:"/",redirect:"/coaches"},{path:"/coaches",component:Se,children:[{name:"coach",path:":coachId",component:_e,props:!0,children:[{name:"contact",path:"contact",component:Ce,props:!0}]}]},{path:"/register",component:xe,meta:{auth:!0}},{path:"/auth",component:Te,meta:{noAuth:!0}},{path:"/messages",component:Ee,meta:{auth:!0}},{path:"/:notFound(.*)",component:ie},{path:"/404/:resource",name:"404ResourceNotFound",props:!0,component:ie}],history:Object(re["b"])(),scrollBehavior:function(e,t,n){}});Ae.beforeEach((function(e,t,n){e.meta.auth&&!Ie.getters.isLoggedIn?n("/auth"):e.meta.noAuth&&Ie.getters.isLoggedIn?n("/coaches"):n()})),Ae.afterEach((function(){Ie.dispatch("loadingError",null)}));var Me=Ae,Le=Object(r["d"])(y);Le.component("BaseButton",C),Le.component("BaseCard",M),Le.component("BaseBadge",D),Le.component("BaseSpinner",ne),Le.use(Me),Le.use(Ie),Le.mount("#app")},"58cf":function(e,t,n){},"6fbf":function(e,t,n){},7362:function(e,t,n){"use strict";n("58cf")},"9be0":function(e,t,n){"use strict";n("9f71")},"9f71":function(e,t,n){},a876:function(e,t,n){},b4c1:function(e,t,n){"use strict";n("a876")},f7bd:function(e,t,n){},ffc9:function(e,t,n){"use strict";n("6fbf")}});
//# sourceMappingURL=app.b521b706.js.map